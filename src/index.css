@tailwind base;
@tailwind components;
@tailwind utilities;

/* CRT Disabled State - removes all effects */
.crt-disabled.crt-screen {
  filter: none !important;
  animation: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

.crt-disabled .crt-scanlines,
.crt-disabled .crt-flicker,
.crt-disabled .crt-rgb-shift,
.crt-disabled .crt-glow,
.crt-disabled .crt-phosphor {
  display: none !important;
  animation: none !important;
  filter: none !important;
  text-shadow: none !important;
}

/* 
 * Typography: Two fonts only (Lora for display, Poppins for body)
 * Fira Code for monospace elements
 */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Fira+Code:wght@400;500&display=swap');

@layer base {
  :root {
    --background: 321 34% 96%;
    --foreground: 321 49% 20%;

    --card: 78 92% 95.098%;
    --card-foreground: 272 71.6667% 47.0588%;

    --popover: 321 34% 96%;
    --popover-foreground: 272 71.6667% 47.0588%;

    --primary: 321 49% 11%;
    --primary-foreground: 321 34% 96%;

    --secondary: 330 81.1881% 60.3922%;
    --secondary-foreground: 293 69.4779% 48.8235%;

    --muted: 81 21% 93%;
    --muted-foreground: 321 9% 37%;

    --accent: 213 93.9024% 67.8431%;
    --accent-foreground: 81 88.4615% 79.6078%;

    --destructive: 0 76% 90%;
    --destructive-foreground: 0 63% 31%;

    --border: 333 71.4286% 50.5882%;
    --input: 269 100% 91.7647%;
    --ring: 141 78.9474% 85.098%;

    --radius: 0.75rem;

    --chart-1: 321 58% 39%;
    --chart-2: 351 76% 61%;
    --chart-3: 21 37% 24%;
    --chart-4: 51 74% 66%;
    --chart-5: 81 87% 67%;

    /* Typography */
    --font-display: 'Lora', Georgia, serif;
    --font-body: 'Poppins', system-ui, sans-serif;
    --font-mono: "Geist Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;

    /* Semantic Opacity Scale */
    --opacity-subtle: 0.05;
    --opacity-light: 0.1;
    --opacity-medium: 0.2;
    --opacity-heavy: 0.4;

    /* Shadows */
    --shadow-color: 326 58% 57% / 0.5;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0px 1px 3.5px 0px hsla(271, 91%, 65%, 0.46);
    --shadow-soft: 3px 3px 0px 0px hsl(var(--shadow-color));
    --shadow-card: 3px 3px 0px 0px hsl(var(--shadow-color));
    --shadow-md: 0px 1px 10.5px 0px hsla(271, 91%, 65%, 0.46);
    --shadow-lg: 0px 1px 17.5px 0px hsla(271, 91%, 65%, 0.46);
    --shadow-elevated: 6px 6px 0px 0px hsl(var(--shadow-color));
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);

    /* Gradients */
    --gradient-subtle: linear-gradient(135deg, hsl(330 33% 94%) 0%, hsl(39 93% 89%) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(42 93% 82%) 0%, hsl(333 75% 72%) 100%);

    --sidebar-background: 321 34% 96%;
    --sidebar-foreground: 321 49% 25%;
    --sidebar-primary: 321 49% 11%;
    --sidebar-primary-foreground: 321 34% 96%;
    --sidebar-accent: 81 31% 93%;
    --sidebar-accent-foreground: 321 49% 20%;
    --sidebar-border: 81 11% 91%;
    --sidebar-ring: 81 1% 75%;
    --sidebar: 248 0.3% 98.4%;
    --font-sans: Inter, ui-sans-serif, system-ui, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    --font-serif: "EB Garamond", ui-serif, Georgia, Cambria, Times New Roman, Times, serif;
    --shadow: 0px 1px 7px 0px hsla(271, 91%, 65%, 0.46);
    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    --background: 321 3% 13%;
    --foreground: 321 29% 70%;

    --card: 321 3% 8%;
    --card-foreground: 321 29% 70%;

    --popover: 321 3% 13%;
    --popover-foreground: 321 29% 70%;

    --primary: 321 29% 92%;
    --primary-foreground: 321 3% 13%;

    --secondary: 81 1% 12%;
    --secondary-foreground: 321 29% 70%;

    --muted: 81 -4% 12%;
    --muted-foreground: 81 1% 75%;

    --accent: 201 13% 25%;
    --accent-foreground: 201 53% 70%;

    --destructive: 0 33% 20%;
    --destructive-foreground: 0 91% 71%;

    --border: 81 -4% 12%;
    --input: 81 1% 25%;
    --ring: 81 1% 83%;

    --chart-1: 321 70% 50%;
    --chart-2: 81 75% 55%;
    --chart-3: 351 80% 55%;
    --chart-4: 241 65% 60%;
    --chart-5: 121 60% 45%;

    /* Shadows for dark mode */
    --shadow-color: 199 32% 27%;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0px 1px 3.5px 0px hsla(271, 91%, 65%, 0.46);
    --shadow-soft: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-card: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-md: 0px 1px 10.5px 0px hsla(271, 91%, 65%, 0.46);
    --shadow-lg: 0px 1px 17.5px 0px hsla(271, 91%, 65%, 0.46);
    --shadow-elevated: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);

    --gradient-subtle: linear-gradient(135deg, hsl(197 43% 12%) 0%, hsl(197 33% 16%) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(338 38% 54%) 0%, hsl(181 40% 52%) 100%);

    --sidebar-background: 321 3% 13%;
    --sidebar-foreground: 81 31% 95%;
    --sidebar-primary: 201 53% 55%;
    --sidebar-primary-foreground: 321 29% 70%;
    --sidebar-accent: 81 -4% 12%;
    --sidebar-accent-foreground: 81 31% 95%;
    --sidebar-border: 81 -4% 12%;
    --sidebar-ring: 81 1% 83%;
    --sidebar: 266 4% 20.8%;
    --shadow: 0px 1px 7px 0px hsla(271, 91%, 65%, 0.46);
    --radius: 0.75rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
    /* Account for fixed navbar height on anchor navigation */
    scroll-padding-top: 5rem; /* 80px = navbar height */
    /* Smooth dark mode transition */
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
    /* Enable smooth theme transitions */
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  /* Glassmorphism utilities */
  .glass {
    @apply backdrop-blur-md;
    background: linear-gradient(135deg, hsl(var(--card) / 0.7) 0%, hsl(var(--card) / 0.5) 100%);
    border: 1px solid hsl(var(--border) / 0.3);
  }
  
  .glass-subtle {
    @apply backdrop-blur-sm;
    background: hsl(var(--card) / 0.4);
    border: 1px solid hsl(var(--border) / 0.2);
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    @apply font-medium tracking-tight;
  }

  /* Ensure sections have proper scroll targets */
  section[id] {
    scroll-margin-top: 5rem; /* 80px for fixed navbar */
  }
}

@layer components {
  .text-balance {
    text-wrap: balance;
  }

  .prose-editorial {
    @apply leading-relaxed;
    font-family: var(--font-body);
  }

  .prose-editorial strong {
    @apply font-semibold text-foreground;
  }

  .highlight-text {
    background: linear-gradient(180deg, transparent 60%, hsl(var(--accent) / 0.4) 60%);
  }

  .card-hover {
    @apply transition-all duration-300 ease-out;
  }

  .card-hover:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevated);
  }

  /* ========================================
   * 3D PORTFOLIO CARD STYLES
   * ======================================== */
  
  .portfolio-card-3d {
    perspective: 1000px;
    transform-style: preserve-3d;
  }

  .portfolio-card-inner {
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1), 
                box-shadow 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    will-change: transform, box-shadow;
  }

  /* 3D depth layers */
  .portfolio-card-inner::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      hsl(var(--primary) / 0.08) 0%,
      transparent 50%,
      hsl(var(--secondary) / 0.05) 100%
    );
    border-radius: inherit;
    opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
    z-index: 1;
  }

  /* Bottom shadow layer for 3D depth */
  .portfolio-card-inner::after {
    content: '';
    position: absolute;
    inset: 4px -4px -4px 4px;
    background: hsl(var(--foreground) / 0.15);
    border-radius: inherit;
    z-index: -1;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Hover state - lift and tilt */
  @media (hover: hover) {
    .portfolio-card-3d:hover .portfolio-card-inner {
      transform: translateY(-8px) translateZ(20px) rotateX(2deg);
      box-shadow: 
        0 20px 40px -10px hsl(var(--primary) / 0.25),
        0 10px 20px -5px hsl(var(--foreground) / 0.1);
    }

    .portfolio-card-3d:hover .portfolio-card-inner::before {
      opacity: 1;
    }

    .portfolio-card-3d:hover .portfolio-card-inner::after {
      inset: 8px -8px -8px 8px;
      background: hsl(var(--foreground) / 0.1);
    }
  }

  /* Card image shine effect */
  .card-image-shine {
    position: relative;
    overflow: hidden;
  }

  .card-image-shine::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      105deg,
      transparent 40%,
      hsl(0 0% 100% / 0.15) 45%,
      hsl(0 0% 100% / 0.25) 50%,
      hsl(0 0% 100% / 0.15) 55%,
      transparent 60%
    );
    transform: translateX(-100%);
    transition: transform 0.6s ease;
    pointer-events: none;
  }

  @media (hover: hover) {
    .portfolio-card-3d:hover .card-image-shine::after {
      transform: translateX(100%);
    }
  }

  /* Tag animation */
  .portfolio-tag {
    transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    transform: translateZ(0);
  }

  @media (hover: hover) {
    .portfolio-card-3d:hover .portfolio-tag {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 4px 8px -2px hsl(var(--secondary) / 0.3);
    }
  }

  /* Stagger animation for tags */
  .portfolio-tag:nth-child(1) { transition-delay: 0ms; }
  .portfolio-tag:nth-child(2) { transition-delay: 50ms; }
  .portfolio-tag:nth-child(3) { transition-delay: 100ms; }
  .portfolio-tag:nth-child(4) { transition-delay: 150ms; }

  /* Button lift effect */
  .portfolio-button {
    position: relative;
    transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    transform: translateZ(0);
  }

  @media (hover: hover) {
    .portfolio-button:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 8px 16px -4px hsl(var(--primary) / 0.4),
        0 4px 8px -2px hsl(var(--foreground) / 0.1);
    }

    .portfolio-button:active {
      transform: translateY(-1px);
      box-shadow: 
        0 4px 8px -2px hsl(var(--primary) / 0.3),
        0 2px 4px -1px hsl(var(--foreground) / 0.1);
    }
  }

  /* ========================================
   * NAVBAR STYLES
   * ======================================== */
  .navbar {
    @apply will-change-transform;
  }

  .nav-link {
    @apply relative text-muted-foreground transition-colors duration-200;
  }

  .nav-link:hover {
    @apply text-foreground;
  }

  /* Active nav link indicator (for CSS-only fallback) */
  .nav-link--active {
    @apply text-primary;
  }

  .section-divider {
    @apply h-px w-full;
    background: linear-gradient(90deg, transparent 0%, hsl(var(--border)) 20%, hsl(var(--border)) 80%, transparent 100%);
  }

  .section-divider {
    @apply h-px w-full;
    background: linear-gradient(90deg, transparent 0%, hsl(var(--border)) 20%, hsl(var(--border)) 80%, transparent 100%);
  }

  /* ========================================
   * RETRO WINDOWS UI STYLES
   * ======================================== */

  /* Base window styling */
  .retro-window {
    @apply bg-card rounded-none;
    border: 2px solid hsl(var(--border));
    box-shadow: 
      inset 1px 1px 0 hsl(var(--accent) / 0.5),
      inset -1px -1px 0 hsl(var(--muted-foreground) / 0.3),
      3px 3px 0 hsl(var(--foreground) / 0.2);
  }

  /* Window title bar */
  .retro-title-bar {
    @apply flex items-center justify-between px-2 py-1.5 text-primary-foreground;
    background: linear-gradient(90deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8)) 100%;
    border-bottom: 1px solid hsl(var(--border));
  }

  /* Close button in title bar */
  .retro-close-btn {
    @apply flex items-center justify-center w-4 h-4 bg-muted text-foreground;
    border: 1px solid hsl(var(--border));
    box-shadow: 
      inset 1px 1px 0 hsl(var(--background)),
      inset -1px -1px 0 hsl(var(--muted-foreground) / 0.5);
  }
  .retro-close-btn:hover {
    @apply bg-destructive text-destructive-foreground;
  }
  .retro-close-btn:active {
    box-shadow: 
      inset -1px -1px 0 hsl(var(--background)),
      inset 1px 1px 0 hsl(var(--muted-foreground) / 0.5);
  }

  /* Menu item in start menu */
  .retro-menu-item {
    @apply flex items-center gap-3 px-3 py-2 text-sm text-foreground;
    @apply hover:bg-primary hover:text-primary-foreground;
    @apply transition-colors cursor-pointer text-left;
  }

  .retro-menu-icon {
    @apply flex items-center justify-center;
  }

  /* Divider line */
  .retro-divider {
    @apply h-px my-1;
    background: linear-gradient(90deg, transparent, hsl(var(--border)), transparent);
  }

  /* Taskbar styles - responsive height */
  .retro-taskbar {
    @apply h-11 sm:h-11 bg-muted;
    border-top: 2px solid hsl(var(--border));
    box-shadow: 
      inset 0 1px 0 hsl(var(--accent) / 0.3),
      0 -2px 10px hsl(var(--foreground) / 0.1);
    background: linear-gradient(180deg, hsl(var(--muted)) 0%, hsl(var(--muted) / 0.9) 100%);
    /* Safe area for iOS notch/home indicator */
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* Start button */
  .retro-start-btn {
    @apply flex items-center gap-2 h-8 px-3 text-foreground font-medium;
    background: linear-gradient(180deg, hsl(var(--card)) 0%, hsl(var(--muted)) 100%);
    border: 2px outset hsl(var(--border));
    box-shadow: 
      inset 1px 1px 0 hsl(var(--background)),
      inset -1px -1px 0 hsl(var(--muted-foreground) / 0.3);
  }
  .retro-start-btn:hover {
    background: linear-gradient(180deg, hsl(var(--accent) / 0.3) 0%, hsl(var(--muted)) 100%);
  }
  .retro-start-btn:active,
  .retro-start-btn.retro-btn-pressed {
    border-style: inset;
    box-shadow: 
      inset -1px -1px 0 hsl(var(--background)),
      inset 1px 1px 0 hsl(var(--muted-foreground) / 0.3);
  }

  /* Taskbar divider */
  .retro-taskbar-divider {
    @apply w-px h-6 mx-1;
    background: linear-gradient(180deg, hsl(var(--muted-foreground) / 0.3), hsl(var(--background)), hsl(var(--muted-foreground) / 0.3));
  }

  /* Quick launch button */
  .retro-quick-launch {
    @apply flex items-center justify-center w-7 h-7 text-foreground;
    background: linear-gradient(180deg, hsl(var(--card)) 0%, hsl(var(--muted)) 100%);
    border: 1px outset hsl(var(--border));
  }
  .retro-quick-launch:hover {
    @apply bg-accent/30;
  }
  .retro-quick-launch:active {
    border-style: inset;
  }

  /* Clock display */
  .retro-clock {
    @apply px-3 py-1 text-foreground;
    background: linear-gradient(180deg, hsl(var(--input)) 0%, hsl(var(--muted)) 100%);
    border: 2px inset hsl(var(--border));
    box-shadow: inset 1px 1px 2px hsl(var(--foreground) / 0.1);
  }

  /* Retro input styling */
  .retro-input {
    @apply rounded-none border-2;
    border-color: hsl(var(--border));
    box-shadow: 
      inset 1px 1px 2px hsl(var(--foreground) / 0.1);
  }
  .retro-input:focus {
    @apply ring-2 ring-primary/50;
    border-color: hsl(var(--primary));
  }

  /* Retro button styling */
  .retro-button {
    @apply rounded-none font-medium;
    background: linear-gradient(180deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.85) 100%);
    border: 2px outset hsl(var(--primary) / 0.8);
    box-shadow: 
      inset 1px 1px 0 hsl(var(--primary-foreground) / 0.3),
      inset -1px -1px 0 hsl(var(--foreground) / 0.2),
      2px 2px 0 hsl(var(--foreground) / 0.15);
  }
  .retro-button:hover {
    background: linear-gradient(180deg, hsl(var(--primary) / 0.9) 0%, hsl(var(--primary) / 0.75) 100%);
  }
  .retro-button:active {
    border-style: inset;
    box-shadow: 
      inset -1px -1px 0 hsl(var(--primary-foreground) / 0.3),
      inset 1px 1px 0 hsl(var(--foreground) / 0.2);
  }
  .retro-button:disabled {
    @apply opacity-60 cursor-not-allowed;
    border-style: solid;
  }

  /* Link button in contact section */
  .retro-link-button {
    @apply flex items-center gap-3 w-full px-3 py-2 text-sm text-foreground;
    background: linear-gradient(180deg, hsl(var(--card)) 0%, hsl(var(--muted) / 0.5) 100%);
    border: 1px solid hsl(var(--border));
    box-shadow: 
      inset 1px 1px 0 hsl(var(--background) / 0.5),
      inset -1px -1px 0 hsl(var(--muted-foreground) / 0.2);
    transition: all 0.15s ease;
  }
  .retro-link-button:hover {
    @apply bg-primary/10;
    border-color: hsl(var(--primary));
  }
}

@layer utilities {
  /* Touch-friendly utilities */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Safe area bottom for iOS */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
  
  /* Extra small screen breakpoint for hiding elements */
  @screen xs {
    .xs\\:inline {
      display: inline;
    }
    .xs\\:block {
      display: block;
    }
  }
  
  /* Hide scrollbar utility */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .animate-fade-up {
    animation: fadeUp 0.6s ease-out forwards;
  }

  .animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }

  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }
  .delay-400 { animation-delay: 400ms; }
  .delay-500 { animation-delay: 500ms; }

  /* ========================================
   * CRT SCREEN EFFECTS
   * ======================================== */

  /* CRT container with curvature effect */
  .crt-screen {
    position: relative;
    overflow: hidden;
  }

  /* Subtle barrel distortion / curvature */
  .crt-screen::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9998;
    background: radial-gradient(
      ellipse at center,
      transparent 0%,
      transparent 70%,
      hsl(var(--foreground) / 0.03) 90%,
      hsl(var(--foreground) / 0.08) 100%
    );
    border-radius: 8px;
  }

  /* Scanlines overlay */
  .crt-scanlines {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
    background: repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 1px,
      hsl(var(--foreground) / 0.03) 1px,
      hsl(var(--foreground) / 0.03) 2px
    );
    animation: crt-scanline-scroll 8s linear infinite;
  }

  /* Scanline scroll animation */
  @keyframes crt-scanline-scroll {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 0 100px;
    }
  }

  /* Flicker effect */
  .crt-flicker {
    animation: crt-flicker 0.15s infinite;
  }

  @keyframes crt-flicker {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.98;
    }
    75% {
      opacity: 0.995;
    }
  }

  /* CRT glow effect on content */
  .crt-glow {
    text-shadow: 
      0 0 1px hsl(var(--primary) / 0.3),
      0 0 2px hsl(var(--primary) / 0.1);
  }

  /* RGB color fringing / chromatic aberration (subtle) */
  .crt-rgb-shift {
    position: relative;
  }

  .crt-rgb-shift::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9997;
    background: 
      linear-gradient(90deg, 
        hsl(0 100% 50% / 0.01) 0%, 
        transparent 2%,
        transparent 98%,
        hsl(240 100% 50% / 0.01) 100%
      );
  }

  /* Screen power-on effect (optional, add to body on load) */
  .crt-power-on {
    animation: crt-power-on 0.8s ease-out forwards;
  }

  @keyframes crt-power-on {
    0% {
      filter: brightness(0) saturate(0);
      transform: scaleY(0.01);
    }
    40% {
      filter: brightness(1.5) saturate(0);
      transform: scaleY(0.01);
    }
    60% {
      filter: brightness(1.2) saturate(0.5);
      transform: scaleY(1);
    }
    100% {
      filter: brightness(1) saturate(1);
      transform: scaleY(1);
    }
  }

  /* Phosphor glow persistence */
  .crt-phosphor {
    transition: opacity 0.1s ease-out;
  }
}