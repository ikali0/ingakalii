@tailwind base;
@tailwind components;
@tailwind utilities;

/* 1. Imports MUST come first */
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@300;400;500;600&family=Geist+Mono&display=swap');

@layer base {
  :root {
    /* AI-Native Color Palette - Trust + Intelligence */
    --background: 210 40% 98%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    --primary: 217 91% 53%;              /* Authority Blue */
    --primary-foreground: 0 0% 100%;
    --secondary: 173 80% 40%;            /* Systems Teal */
    --secondary-foreground: 0 0% 100%;
    --muted: 226 100% 97%;
    --muted-foreground: 215 19% 35%;
    --accent: 263 70% 58%;               /* Electric Violet */
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 239 84% 67%;
    --radius: 0.75rem;

    /* Neural Purple for AI elements */
    --neural: 263 70% 58%;
    --neural-foreground: 0 0% 100%;

    /* Sidebar tokens */
    --sidebar-background: 210 40% 96%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 217 91% 53%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 263 70% 58%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 214 32% 91%;
    --sidebar-ring: 239 84% 67%;

    /* Typography Vars */
    --font-display: 'Playfair Display', Georgia, serif;
    --font-body: 'Inter', system-ui, sans-serif;
    --font-mono: "Geist Mono", "Fira Code", monospace;

    /* Enhanced Shadows - Blue-tinted for depth */
    --shadow-color: 217 50% 30%;
    --shadow-sm: 0 1px 3px 0 hsla(217, 50%, 30%, 0.08);
    --shadow-soft: 0 4px 20px -4px hsla(217, 50%, 30%, 0.12);
    --shadow-md: 0 4px 12px -2px hsla(217, 50%, 30%, 0.15);
    --shadow-elevated: 0 8px 32px -8px hsla(217, 50%, 30%, 0.18);
    --shadow-glow: 0 0 20px -5px hsla(263, 70%, 58%, 0.3);
  }

  .dark {
    --background: 222 54% 8%;
    --foreground: 214 32% 91%;
    --card: 221 39% 11%;
    --card-foreground: 214 32% 91%;
    --popover: 221 39% 11%;
    --popover-foreground: 214 32% 91%;
    --primary: 217 91% 60%;
    --primary-foreground: 222 54% 8%;
    --secondary: 173 80% 50%;
    --secondary-foreground: 222 54% 8%;
    --muted: 217 33% 17%;
    --muted-foreground: 218 11% 65%;
    --accent: 258 90% 76%;
    --accent-foreground: 222 54% 8%;
    --destructive: 0 91% 71%;
    --destructive-foreground: 222 54% 8%;
    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 234 89% 74%;
    
    --neural: 258 90% 76%;
    --neural-foreground: 222 54% 8%;

    /* Sidebar tokens - dark */
    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 214 32% 91%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 222 54% 8%;
    --sidebar-accent: 258 90% 76%;
    --sidebar-accent-foreground: 222 54% 8%;
    --sidebar-border: 217 33% 17%;
    --sidebar-ring: 234 89% 74%;
    
    --shadow-color: 217 50% 15%;
    --shadow-soft: 0 4px 20px -4px hsla(217, 50%, 10%, 0.4);
    --shadow-elevated: 0 8px 32px -8px hsla(217, 50%, 10%, 0.5);
    --shadow-glow: 0 0 25px -5px hsla(258, 90%, 76%, 0.25);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
  }
}

@layer components {
  /* ========================================
   * BEM UTILITY CLASSES
   * Consolidated patterns for reusability
   * ======================================== */

  /* Section - Base layout for page sections */
  .section {
    @apply relative overflow-hidden;
  }
  .section--padded {
    @apply py-section-sm md:py-section px-4;
  }
  .section--muted {
    @apply bg-muted/30;
  }
  .section--background {
    @apply bg-background;
  }
  .section__container {
    @apply container relative z-10 mx-auto;
  }
  .section__container--sm {
    @apply max-w-2xl;
  }
  .section__container--md {
    @apply max-w-3xl;
  }
  .section__container--lg {
    @apply max-w-5xl;
  }
  .section__container--xl {
    @apply max-w-6xl;
  }

  /* Card - Reusable card patterns */
  .card {
    @apply rounded-xl overflow-hidden;
  }
  .card--glass {
    @apply backdrop-blur-sm;
    background: linear-gradient(135deg, hsla(var(--card) / 0.85) 0%, hsla(var(--card) / 0.65) 100%);
    box-shadow: var(--shadow-soft);
  }
  .card__content {
    @apply p-card;
  }
  .card__content--sm {
    @apply p-card-sm;
  }
  .card__image {
    @apply relative overflow-hidden bg-muted;
  }
  .card__image-zoom {
    @apply w-full h-full object-cover transition-transform duration-300 ease-out;
  }
  .card__image-zoom:hover,
  .group:hover .card__image-zoom {
    @apply scale-105;
  }

  /* Header - Section header patterns */
  .header {
    @apply mb-container md:mb-container-lg;
  }
  .header__overline {
    @apply text-overline uppercase text-accent font-semibold mb-element-sm;
  }
  .header__title {
    @apply font-display text-display-sm md:text-display-md text-foreground;
  }
  .header__description {
    @apply text-body text-muted-foreground max-w-xl mx-auto leading-relaxed;
  }

  /* Icon - Badge/icon container patterns */
  .icon-badge {
    @apply flex items-center justify-center rounded-lg;
  }
  .icon-badge--sm {
    @apply w-8 h-8;
  }
  .icon-badge--md {
    @apply w-10 h-10;
  }
  .icon-badge--primary {
    @apply bg-primary/10 text-primary;
  }
  .icon-badge--card {
    @apply bg-card/90 backdrop-blur-sm shadow-md;
  }

  /* List - Common list patterns */
  .list {
    @apply space-y-element;
  }
  .list__item {
    @apply flex items-start gap-element text-foreground;
  }
  .list__icon {
    @apply text-accent w-4 h-4 mt-0.5 flex-shrink-0;
  }
  .list__text {
    @apply text-body-sm;
  }

  /* Grid - Layout grid patterns */
  .grid--cards {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-container md:gap-container-lg;
  }
  .grid--bento {
    @apply grid grid-cols-1 md:grid-cols-3 auto-rows-[minmax(180px,auto)] gap-container;
  }
  .grid--two-col {
    @apply grid sm:grid-cols-2 gap-container-lg;
  }

  /* ========================================
   * RETRO WINDOWS UI (BEM)
   * ======================================== */
  .retro-window {
    @apply bg-card rounded-none transition-all duration-200;
    border: 2px solid hsl(var(--border));
    box-shadow: 
      inset 1px 1px 0 hsla(var(--accent) / 0.3),
      inset -1px -1px 0 hsla(var(--muted-foreground) / 0.2),
      var(--shadow-soft);
  }
  .retro-window__title-bar {
    @apply flex items-center justify-between px-2 py-1.5 text-primary-foreground select-none;
    background: linear-gradient(90deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.85) 100%);
  }
  .retro-window__controls {
    @apply flex gap-1;
  }
  .retro-window__control {
    @apply w-3 h-3 rounded-sm;
  }
  .retro-window__content {
    @apply p-card bg-card/70 backdrop-blur-sm;
  }

  /* Legacy alias for backwards compat */
  .retro-title-bar {
    @apply flex items-center justify-between px-2 py-1.5 text-primary-foreground select-none;
    background: linear-gradient(90deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.85) 100%);
  }

  .retro-button {
    @apply rounded-none font-medium px-4 py-2 transition-all active:scale-[0.98];
    background: linear-gradient(180deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.9) 100%);
    border: 2px outset hsl(var(--primary) / 0.7);
    box-shadow: 2px 2px 0 hsla(var(--foreground) / 0.1);
  }
  .retro-button:active {
    border-style: inset;
    @apply translate-x-[1px] translate-y-[1px];
  }

  /* ========================================
   * GLASS EFFECTS (BEM)
   * ======================================== */
  .glass {
    @apply backdrop-blur-sm;
    background: linear-gradient(135deg, hsla(var(--card) / 0.85) 0%, hsla(var(--card) / 0.65) 100%);
  }
  .glass--subtle {
    @apply backdrop-blur-sm;
    background: linear-gradient(135deg, hsla(var(--card) / 0.9) 0%, hsla(var(--card) / 0.7) 100%);
  }
  .glass--strong {
    @apply backdrop-blur-md;
    background: linear-gradient(135deg, hsla(var(--card) / 0.95) 0%, hsla(var(--card) / 0.85) 100%);
  }

  /* Legacy alias */
  .glass-subtle {
    @apply backdrop-blur-sm;
    background: linear-gradient(135deg, hsla(var(--card) / 0.9) 0%, hsla(var(--card) / 0.7) 100%);
  }
}

@layer utilities {
  /* CRT Effects Wrapper */
  .crt-screen {
    position: relative;
    overflow: hidden;
  }

  /* Scanlines with improved performance */
  .crt-scanlines {
    @apply pointer-events-none fixed inset-0 z-[9999];
    background: linear-gradient(
      rgba(18, 16, 16, 0) 50%, 
      rgba(0, 0, 0, 0.08) 50%
    ), 
    linear-gradient(
      90deg, 
      rgba(30, 64, 175, 0.02), 
      rgba(16, 185, 129, 0.01), 
      rgba(30, 64, 175, 0.02)
    );
    background-size: 100% 3px, 3px 100%;
  }

  /* CRT Disabled Override */
  .crt-disabled {
    filter: none !important;
    text-shadow: none !important;
  }
  .crt-disabled .crt-scanlines, 
  .crt-disabled::before, 
  .crt-disabled::after {
    display: none !important;
  }

  @keyframes crt-flicker {
    0% { opacity: 0.99; }
    5% { opacity: 0.96; }
    10% { opacity: 0.99; }
    15% { opacity: 0.97; }
    100% { opacity: 1; }
  }

  .animate-crt-flicker {
    animation: crt-flicker 0.15s infinite;
  }

  /* Gradient utilities */
  .gradient-hero {
    background: linear-gradient(135deg, hsla(213, 94%, 35%, 0.05) 0%, transparent 50%, hsla(158, 55%, 45%, 0.03) 100%);
  }

  .gradient-section-alt {
    background: linear-gradient(180deg, hsl(var(--background)) 0%, hsla(var(--muted) / 0.5) 50%, hsl(var(--background)) 100%);
  }
}
